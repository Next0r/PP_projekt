
@using BedAndBreakfast.Data;
@{
    ViewData["Title"] = "Search";
    // Get list of help pages passed from controller action.
    List<HelpPage> helpPages = (List<HelpPage>)ViewData["helpPages"];
}


<head>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet" />
</head>

<h2>Browse</h2>

<h4>@ViewBag.Message</h4>

@if (User.IsInRole(Role.Admin))
{
    <a asp-controller="Administration" asp-action="AddHelpPage">
        Add new help page.
    </a>
}

@*
    This line of code is responsible for injecting HTML code of different file.
*@

<partial name="SearchPartial" />

@*
    This from returns set of pages (previously searched or not) as buttons.
    If help page is selected page ID is returned to action which will display
    whole content of page.
*@
@if (helpPages != null && helpPages.Count() != 0)
{
    foreach (HelpPage helpPage in helpPages)
    {
        <div>
            @if (helpPage.IsLocked)
            {
                <h4 style="color: lightcoral;">@helpPage.Title</h4>
            }
            else
            {
                <a asp-action="Display" asp-route-hPage="@helpPage.ID">

                    <h4>@helpPage.Title</h4>

                </a>
            }
            <p>TODO: Get some short description form help page content.</p>
            @*If administrator uses help browser he can edit pages.*@
            @if (User.IsInRole(Role.Admin))
            {

                <a asp-controller="Administration" asp-action="EditHelpPage" asp-route-hPage="@helpPage.ID">
                    Edit this help page.
                </a>

            }
        </div>
    }
}
else
{
    <div>
        <p>
            No help pages found :(
        </p>
    </div>
}





